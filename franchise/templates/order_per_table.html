<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tailwind CSS Example</title>
  <!-- Include Tailwind CSS -->
  <link
  href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
  rel="stylesheet"
  />
  <!-- Include Flowbite CSS -->
  <link
  href="https://cdn.jsdelivr.net/npm/flowbite@latest/dist/flowbite.css"
  rel="stylesheet"
  />
  <!-- Include Material Tailwind CSS -->
  <link
  href="https://cdn.jsdelivr.net/npm/material-tailwind/dist/material-tailwind.min.css"
  rel="stylesheet"
  />
  <script src="https://unpkg.com/@material-tailwind/html@latest/scripts/script-name.js"></script>
</head>
<body class="bg-gray-100">
  {% comment %} {% include "aside_bar.html" %} {% endcomment %}
  
  <div class="rounded-md">
    {% for table in tables%}
    <div class="p-4 shadow-md bg-gray-50 rounded-lg">
      <p class="ms-3 text-center">{{ table.0.table_type }}</p>
      <div
      class="grid grid-cols-5 grid-rows-1 bg-gray-100 p-0 rounded-md items-center justify-center"
      >
      {% for i in table%}
      <div class="align-middle inline-block">
        <svg 
        id={{i.id}}
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        version="1.1"
        viewBox="0 0 1024 1024"
        style="vertical-align: middle"
        xml:space="preserve"
        fill={{i.table_color}}
        onclick="handleClick('{{i.id}}')"
        >
        <path
        class="shadow-md"
        d="M640.3,87.6c-2.8-0.4-5.3-0.5-8.1-0.5h-226c-6,0-12-0.2-17.9,0c-15.3,0.5-28.5,11.2-30.6,26.6  c-0.9,6.8,0.7,12.5,2.9,18.7c8.6,23.6,17.1,47.2,25.7,70.7c4.6-1.9,9.3-3.7,14-5.3c3.6-1.3,7.2-2.5,10.9-3.7c1.1-0.3,2.2-0.7,3.3-1  c62.8-19.3,131.9-19.4,194.8,0c4.8,1.5,9.5,3,14.2,4.7c3.7,1.3,7.4,2.7,11,4.2c1,0.4,1.9,0.8,2.9,1.2c7.8-21.4,15.6-42.8,23.3-64.1  c1.3-3.5,2.5-7,3.8-10.4l0,0c0.2-0.4,0.3-0.8,0.5-1.2c0.2-0.5,0.3-1,0.4-1.6C669.9,108.6,658.3,90,640.3,87.6z"
        />
        <path
        class="shadow-md"
        d="M805.2,511.9c0,9.1-0.4,18.2-1.2,27.3c-0.4,4.3-0.8,8.5-1.4,12.8c0,0.1,0,0.2-0.1,0.3  c-0.2,0.9-0.3,1.8-0.4,2.7c-0.4,2.4-0.8,4.8-1.2,7.3c-3.1,17.4-7.7,34.6-13.8,51.2c-1.2,3.3-2.4,6.5-3.7,9.8  c-0.2,0.5-0.5,1.3-0.8,1.9c0,0,0,0,0,0c0,0.1-0.1,0.2-0.1,0.2c-0.6,1.6-1.4,3.1-2.1,4.7c-2.9,6.5-6.1,12.9-9.5,19.3  c-6.8,12.8-14.5,25-23,36.7c-1,1.4-2,2.8-3.1,4.1c0,0-0.2,0.2-0.3,0.4c0,0,0,0,0,0c-0.2,0.2-0.3,0.4-0.6,0.7  c-2.3,2.9-4.6,5.7-6.9,8.5c-4.6,5.4-9.3,10.7-14.3,15.8c-9.9,10.2-20.4,19.6-31.5,28.4c-0.3,0.2-0.5,0.4-0.7,0.6c0,0,0,0,0,0  c-0.2,0.2-0.4,0.3-0.4,0.3c-1.4,1-2.7,2-4.1,3.1c-3.2,2.3-6.4,4.5-9.6,6.7c-5.9,4-11.9,7.7-18.1,11.3c-6.2,3.6-12.5,6.9-18.9,10.1  c-3.1,1.5-6.2,3-9.4,4.4c-1.1,0.5-2.2,1-3.3,1.5c-0.3,0.1-0.6,0.3-0.9,0.4c0.1,0,0.2-0.1,0.3-0.1c0.1,0,0.2-0.1,0.2-0.1  c0.1,0,0.1-0.1,0.2-0.1c0,0,0,0,0.1,0c0,0,0,0,0,0c-0.1,0.2-3,1.2-3.4,1.4c-15.7,6.3-31.9,11.3-48.4,15c-4.2,0.9-8.4,1.8-12.6,2.5  c-1.8,0.3-3.6,0.6-5.4,0.9c-1.2,0.2-2.4,0.4-3.7,0.6c-0.4,0.1-0.7,0.1-0.9,0.2c0,0-0.1,0-0.1,0c0,0,0,0,0,0c0,0,0,0,0,0  c-8.9,1.1-17.9,1.9-26.9,2.3c-17.7,0.7-35.5,0-53-2.2c-0.2,0-3.4-0.5-4.3-0.6c-2.1-0.3-4.2-0.7-6.3-1.1c-4.8-0.9-9.6-1.8-14.3-2.9  c-8.5-2-17-4.3-25.4-6.9c-7.4-2.4-14.7-5-21.9-7.9c-0.7-0.3-1.4-0.6-2.1-0.8c0,0,0,0-0.1,0c0,0-0.1,0-0.1,0  c-1.3-0.6-2.6-1.1-3.9-1.7c-3.4-1.5-6.7-3.1-10-4.7c-12.8-6.3-25.1-13.5-36.9-21.5c-2.8-1.9-5.6-3.9-8.4-5.9c-1.4-1-2.8-2-4.1-3  c-0.3-0.3-0.7-0.5-1-0.8c-0.1-0.1-0.2-0.2-0.3-0.2c-0.1-0.1-0.3-0.2-0.4-0.4c-5.7-4.6-11.4-9.3-16.8-14.2  c-10.5-9.5-20.3-19.7-29.4-30.6c-2.2-2.6-4.3-5.3-6.5-8c-0.2-0.3-0.4-0.5-0.5-0.7c-0.2-0.3-0.3-0.5-0.4-0.5  c-1.2-1.6-2.3-3.1-3.5-4.7c-4.2-5.8-8.1-11.6-11.9-17.7c-7.7-12.3-14.6-25.2-20.5-38.4c-0.6-1.3-1.2-2.5-1.7-3.8  c-0.1-0.2-0.1-0.3-0.2-0.5c0,0,0-0.1-0.1-0.2c-0.2-0.6-0.5-1.2-0.7-1.8c-1.4-3.5-2.7-7-4-10.5c-2.9-8.1-5.5-16.4-7.8-24.7  c-2.3-8.5-4.2-17.1-5.8-25.8c-0.4-2.1-0.7-4.2-1.1-6.3c-0.1-0.8-0.6-4-0.6-4.2c0,0,0,0,0,0c-0.6-4.5-1-9-1.4-13.5  c-1.5-18.1-1.5-36.4,0.2-54.5c0.3-3.9,0.8-7.7,1.3-11.6c0.1-0.2,0.5-3.4,0.7-4.3c0.4-2.4,0.8-4.8,1.2-7.3c1.6-8.7,3.5-17.3,5.9-25.8  c2.3-8.5,5-16.9,8-25.2c1.2-3.3,2.4-6.5,3.7-9.7c0.3-0.7,0.6-1.4,0.9-2.1c0.2-0.5,0.3-0.7,0.3-0.7c-0.1,0.1-0.9,2-0.9,2  c-0.3-0.5,2.4-5.6,2.7-6.1c5.9-13,12.7-25.6,20.3-37.7c3.8-6,7.8-11.9,12-17.6c1-1.4,2-2.8,3.1-4.1c0.2-0.3,0.4-0.6,0.6-0.8  c0,0,0.1-0.1,0.1-0.1c0,0,0,0,0-0.1c0-0.1,0.1-0.1,0.2-0.2c2.3-2.9,4.6-5.7,6.9-8.5c9.3-11,19.3-21.4,30.1-31  c5.3-4.7,10.7-9.2,16.3-13.7c0,0,0,0,0,0c-0.5,0.4-1.2,0.9-1.2,0.9c0-0.1,0.8-0.7,1.4-1.1c0,0,0,0,0.1-0.1c0,0,0,0,0,0s0,0,0,0  c0,0,0,0,0,0c0.3-0.2,0.6-0.4,0.7-0.5c1.4-1,2.8-2,4.1-3c3-2.2,6-4.3,9-6.3c11.8-8,24.2-15.1,37-21.4c3.1-1.5,6.2-3,9.4-4.4  c0.5-0.3,5-2.7,5.4-2.4c0,0-1.9,0.8-2.1,0.8c0,0,0.2-0.1,0.7-0.3c1.2-0.5,2.3-0.9,3.4-1.4c7.3-2.9,14.8-5.6,22.3-7.9  c8.4-2.6,16.8-4.9,25.4-6.8c4.2-0.9,8.4-1.8,12.6-2.5c2.1-0.4,4.2-0.7,6.3-1.1c1.2-0.2,2.4-0.4,3.7-0.6c0.1,0,0.2,0,0.3-0.1  c18.3-2.2,36.7-3.1,55.2-2.2c4.4,0.2,8.7,0.5,13.1,0.9c2.2,0.2,4.3,0.4,6.5,0.7c0.9,0.1,1.8,0.2,2.8,0.3c0.3,0,2.3,0.3,3.2,0.4  c0,0,0.1,0,0.1,0c0.1,0,0.1,0,0.2,0c0.2,0,0.3,0.1,0.4,0.1c1.2,0.2,2.4,0.4,3.7,0.6c2.1,0.3,4.2,0.7,6.3,1.1c4.5,0.8,9,1.7,13.4,2.8  c16.1,3.7,32,8.7,47.3,14.8c0.4,0.2,0.8,0.3,1.2,0.5c0,0,0,0,0,0c0,0,0.1,0.1,0.1,0.1c1.6,0.7,3.2,1.4,4.8,2.1  c3.6,1.6,7.2,3.3,10.7,5.1c6.4,3.2,12.7,6.6,18.8,10.2c6.1,3.6,12.2,7.4,18,11.4c2.8,1.9,5.6,3.9,8.4,5.9c1.4,1,2.8,2,4.1,3.1  c0,0,0.2,0.1,0.3,0.2c0,0,0,0,0,0c0,0,0,0,0,0s0,0,0,0c0.5,0.4,1.3,0.9,1.3,1c-0.3-0.2-0.6-0.4-0.8-0.6c0.3,0.2,0.5,0.4,0.8,0.6  c11.3,8.9,22,18.6,32,29c4.9,5.1,9.6,10.4,14.2,15.8c2.2,2.6,4.3,5.3,6.5,8c0,0,0.1,0.1,0.1,0.1c0,0,0.1,0.1,0.1,0.1  c0.2,0.3,0.5,0.6,0.7,0.9c1.2,1.6,2.3,3.1,3.5,4.7c8.3,11.5,15.9,23.6,22.5,36.2c3.4,6.3,6.5,12.8,9.4,19.3c0.1,0.2,1,1.8,1.6,3.1  c-0.2-0.4-0.3-0.3,0.2,1c0.4,0.9,0.7,1.8,1.1,2.8c1.4,3.5,2.7,7,4,10.5c5.9,16.5,10.4,33.5,13.4,50.7c0.4,2.1,0.7,4.2,1.1,6.4  c0.2,1.1,0.3,2.1,0.5,3.2c0,0,0,0.1,0,0.1c0,0.1,0,0.2,0,0.2c0,0,0,0.1,0,0.1c0.5,4.1,0.9,8.1,1.3,12.2  C804.8,493.7,805.1,502.8,805.2,511.9z"
        />
        <path
        class="shadow-md"
        d="M664.9,896.2c-1.7-5.3-3.8-10.4-5.7-15.6c-7.3-20-14.5-39.9-21.8-59.9c-4.6,1.9-9.3,3.7-14,5.3  c-4.7,1.7-9.4,3.3-14.2,4.7c-7.6,2.3-15.2,4.3-22.9,6.1c-57,12.8-116.3,10.5-171.8-6.3c-4.8-1.4-9.5-3-14.2-4.7h0  c-4.7-1.7-9.4-3.4-14-5.3c-7.1,19.5-14.2,39-21.3,58.6c-4.9,13.5-11.4,26.3-4.4,40.7c5.2,10.7,16.3,16.6,27.9,16.9c2,0.1,4,0,5.9,0  h179.6c20.2,0,40.4,0.5,60.6,0c0,0,0,0,0,0c0.3,0,0.6,0,0.9,0c0.5,0,1.1,0,1.6-0.1h0C656.9,934.9,671.4,915.9,664.9,896.2z"
        />
        <path
        class="shadow-md"
        d="M193.1,609.3c-12.3-40.5-17-83.4-13.3-125.6c2.1-23.6,6.7-46.8,13.5-69.1c1.5-4.8,3-9.5,4.7-14.2  c1.7-4.7,3.5-9.4,5.4-14c-25.1-9.4-50.2-19-75.6-27.4c-19.4-6.5-39.5,7.7-40.7,27.9c-0.2,2.4,0,4.9,0,7.4v228.3c0,3.9,0,7.9,0,11.8  c0.1,13.1,6.9,24.7,19.2,29.8c9.7,4,18.4,1.9,27.5-1.4c8.9-3.2,17.8-6.5,26.7-9.7c14.2-5.2,28.4-10.3,42.6-15.5  c-1.9-4.6-3.6-9.3-5.3-14C196.2,618.8,194.6,614.1,193.1,609.3z"
        />
        <path
        class="shadow-md"
        d="M936.7,449.7c0-20.2,0.5-40.4,0-60.6c0,0,0,0,0,0v-0.9c0-0.5-0.1-1-0.1-1.6c0,0,0,0,0,0  c-1.8-19.7-20.7-34.2-40.4-27.7c-5.3,1.7-10.4,3.8-15.6,5.7c-20,7.3-40,14.5-60,21.8c1.9,4.6,3.6,9.3,5.3,14  c1.7,4.7,3.2,9.5,4.7,14.2c9.5,31.5,14.5,64.4,14.6,97.3v0.2c-0.1,19.5-1.9,39-5.2,58.2c-2.3,13.2-5.4,26.3-9.3,39.1  c-1.5,4.8-3,9.5-4.7,14.2s-3.5,9.4-5.3,14c19.5,7.1,39,14.2,58.4,21.3c13.6,4.9,26.3,11.4,40.7,4.4c10.7-5.2,16.6-16.3,16.9-27.9  c0.1-2,0-4,0-6V449.7z"
        />
        <text
        x="50%"
        y="50%"
        text-anchor="middle"
        alignment-baseline="middle"
        fill="black"
        font-size="100px"
        font-weight="bold"
        >
        {{i.table_id}}
      </text>
    </svg>
  </div>
  {% endfor %}
</div>
</div>
{%endfor%}
<script>
  function handleClick(tableId) {
    console.log('SVG element clicked:',tableId);
    var currentUrl = window.location.href;
    var newUrl = currentUrl + "table/" + tableId;
    window.location.href = newUrl;
  }


  const wsScheme = window.location.protocol === 'https:' ? 'wss' : 'ws';
  const wsPath = `${wsScheme}://${window.location.host}/ws/tables/{{franchise}}/{{outlet}}/`;

  const socket = new WebSocket(wsPath);

  socket.onopen = function(event) {
      console.log('WebSocket connection established.');
  };

  socket.onclose = function(event) {
      console.log('WebSocket connection closed.');
  };

  socket.onerror = function(error) {
      console.error('WebSocket error:', error);
  };

  socket.onmessage = function(event) {
    const message = JSON.parse(event.data);
    console.log('Message received from server:', message);
    
    const table = document.getElementById(message.table_id);
    
    if (table) {
        console.log('SVG element found:', table);
        table.setAttribute('fill', message.table_color);
    } else {
        console.log('SVG element not found for ID:', message.table_id);
    }
};

</script>
</body>
</html>